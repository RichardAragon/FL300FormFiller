<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FL-300 Form Auto-Filler</title>
    <!-- Include Bootstrap CSS for styling -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <style>
        .container {
            margin-top: 50px;
            max-width: 800px;
        }
        .section-header {
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 2px solid #ccc;
            padding-bottom: 5px;
        }
        .tooltip-inner {
            max-width: 350px;
            text-align: left;
        }
        .progress {
            height: 20px;
        }
    </style>
    <!-- Include jQuery and Bootstrap JS for interactivity -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container">
        <h2 class="mb-4">FL-300 Form Auto-Filler</h2>

        <!-- Progress Bar -->
        <div class="progress mb-4">
            <div class="progress-bar" role="progressbar" style="width: 0%;" id="progressBar">0%</div>
        </div>

        <form action="{{ url_for('fill_form_route') }}" method="POST" id="fl300Form">
            <!-- Case Type Selection -->
            <div class="section-header">
                <h4>Case Type</h4>
            </div>
            <div class="form-group">
                <label for="case_type">Select Case Type</label>
                <select class="form-control" id="case_type" name="case_type" required>
                    <option value="">-- Please Select --</option>
                    <option value="custody">Child Custody</option>
                    <option value="child_support">Child Support</option>
                    <option value="spousal_support">Spousal Support</option>
                    <option value="property_control">Property Control</option>
                    <option value="attorneys_fees_and_costs">Attorney's Fees and Costs</option>
                </select>
            </div>

            <!-- Your Information -->
            <div class="section-header">
                <h4>Your Information</h4>
            </div>
            <div class="form-group">
                <label for="other_information">Your Full Name</label>
                <input type="text" class="form-control" id="other_information" name="other_information" required>
                <small class="form-text text-muted">Enter your full legal name as it appears on official documents.</small>
            </div>
            <div class="form-group">
                <label for="street_address">Street Address</label>
                <input type="text" class="form-control" id="street_address" name="street_address" required>
            </div>
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" class="form-control" id="city" name="city" required>
            </div>
            <div class="form-group">
                <label for="apartment_suite_number">Apartment/Suite Number (if any)</label>
                <input type="text" class="form-control" id="apartment_suite_number" name="apartment_suite_number">
            </div>
            <div class="form-group">
                <label for="state">State</label>
                <input type="text" class="form-control" id="state" name="state" maxlength="2" required>
            </div>
            <div class="form-group">
                <label for="zip_code">Zip Code</label>
                <input type="text" class="form-control" id="zip_code" name="zip_code" pattern="\d{5}" title="Please enter a valid 5-digit ZIP code" required>
            </div>
            <div class="form-group">
                <label for="phone_number">Phone Number</label>
                <input type="text" class="form-control" id="phone_number" name="phone_number" pattern="\(\d{3}\) \d{3}-\d{4}" title="Please enter a valid phone number (e.g., (123) 456-7890)" required>
            </div>
            <div class="form-group">
                <label for="email_address">Email Address</label>
                <input type="email" class="form-control" id="email_address" name="email_address" required>
                <small class="form-text text-muted">We'll never share your email with anyone else.</small>
            </div>

            <!-- Court Information -->
            <div class="section-header">
                <h4>Court Information</h4>
            </div>
            <div class="form-group">
                <label for="court_name">Court Name</label>
                <input type="text" class="form-control" id="court_name" name="court_name" required>
                <small class="form-text text-muted">Enter the full name of the court handling your case.</small>
            </div>
            <div class="form-group">
                <label for="court_street_address">Court Street Address</label>
                <input type="text" class="form-control" id="court_street_address" name="court_street_address" required>
            </div>
            <div class="form-group">
                <label for="court_city">Court City</label>
                <input type="text" class="form-control" id="court_city" name="court_city" required>
            </div>

            <!-- Party Information -->
            <div class="section-header">
                <h4>Party Information</h4>
            </div>
            <div class="form-group">
                <label for="petitioner_name">Petitioner Name</label>
                <input type="text" class="form-control" id="petitioner_name" name="petitioner_name" required>
                <small class="form-text text-muted">This is the person who initiated the case.</small>
            </div>
            <div class="form-group">
                <label for="respondent_name">Respondent Name</label>
                <input type="text" class="form-control" id="respondent_name" name="respondent_name" required>
                <small class="form-text text-muted">This is the person who is responding to the case.</small>
            </div>

            <!-- Case Information -->
            <div class="section-header">
                <h4>Case Information</h4>
            </div>
            <div class="form-group">
                <label for="case_number">Case Number</label>
                <input type="text" class="form-control" id="case_number" name="case_number" required>
                <small class="form-text text-muted">Enter your case number, which can be found on your court documents.</small>
            </div>

            <!-- Children Information -->
            <div class="section-header">
                <h4>Children Information</h4>
            </div>
            <div id="childrenInfoSection">
                <div class="form-group">
                    <label for="child_name_1">Child Name</label>
                    <input type="text" class="form-control" id="child_name_1" name="child_name[]" required>
                </div>
                <div class="form-group">
                    <label for="child_date_of_birth_1">Child Date of Birth</label>
                    <input type="date" class="form-control" id="child_date_of_birth_1" name="child_date_of_birth[]" required>
                </div>
            </div>
            <button type="button" class="btn btn-secondary mb-3" id="addChildButton">Add Another Child</button>

            <!-- Income Information -->
            <div class="section-header">
                <h4>Income Information</h4>
            </div>
            <div class="form-group">
                <label for="monthly_income">Your Monthly Income</label>
                <input type="number" class="form-control" id="monthly_income" name="monthly_income" required>
            </div>
            <div class="form-group">
                <label for="other_parent_monthly_income">Other Parent's Monthly Income</label>
                <input type="number" class="form-control" id="other_parent_monthly_income" name="other_parent_monthly_income" required>
            </div>

            <!-- Orders Requested -->
            <div class="section-header" id="ordersRequestedSection">
                <h4>Orders Requested</h4>
            </div>
            <div class="form-group" id="ordersRequestedFields">
                <label>Check the orders you are requesting:</label>
                <div class="form-check">
                    <input class="form-check-input orderField custodyField" type="checkbox" id="order_child_custody" name="child_custody" value="Yes">
                    <label class="form-check-label" for="order_child_custody">Child Custody</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input orderField visitation_parenting_timeField" type="checkbox" id="order_child_visitation" name="visitation_parenting_time" value="Yes">
                    <label class="form-check-label" for="order_child_visitation">Child Visitation (Parenting Time)</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input orderField child_supportField" type="checkbox" id="order_child_support" name="child_support" value="Yes">
                    <label class="form-check-label" for="order_child_support">Child Support</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input orderField spousal_partner_supportField" type="checkbox" id="order_spousal_support" name="spousal_partner_support" value="Yes">
                    <label class="form-check-label" for="order_spousal_support">Spousal Support</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input orderField property_controlField" type="checkbox" id="order_property_control" name="property_control" value="Yes">
                    <label class="form-check-label" for="order_property_control">Property Control</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input orderField attorneys_fees_and_costsField" type="checkbox" id="order_attorneys_fees_and_costs" name="attorneys_fees_and_costs" value="Yes">
                    <label class="form-check-label" for="order_attorneys_fees_and_costs">Attorney's Fees and Costs</label>
                </div>
            </div>

            <!-- Facts in Support of Request -->
            <div class="section-header">
                <h4>Facts in Support of Request</h4>
            </div>
            <div class="form-group">
                <label for="facts_in_support">Please provide facts in support of your request:</label>
                <textarea class="form-control" id="facts_in_support" name="facts_in_support" rows="5" required></textarea>
            </div>

            <!-- Signature -->
            <div class="section-header">
                <h4>Signature</h4>
            </div>
            <div class="form-group">
                <label for="cdate1">Date</label>
                <input type="date" class="form-control" id="cdate1" name="cdate1" required>
            </div>
            <div class="form-group">
                <label for="printed_name">Printed Name</label>
                <input type="text" class="form-control" id="printed_name" name="printed_name" required>
            </div>

            <!-- Additional Fields from Form -->
            <div class="form-group">
                <label for="additional_field_1">Additional Field 1</label>
                <input type="text" class="form-control" id="additional_field_1" name="additional_field_1">
            </div>
            <div class="form-group">
                <label for="additional_field_2">Additional Field 2</label>
                <input type="text" class="form-control" id="additional_field_2" name="additional_field_2">
            </div>
            <div class="form-group">
                <label for="additional_field_3">Additional Field 3</label>
                <input type="text" class="form-control" id="additional_field_3" name="additional_field_3">
            </div>
            <div class="form-group">
                <input type="checkbox" class="form-check-input" id="checkbox_example" name="checkbox_example">
                <label class="form-check-label" for="checkbox_example">Check if applicable</label>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary">Fill PDF Form</button>
        </form>
    </div>

    <script>
        // Update progress bar as user fills the form
        const formElements = document.querySelectorAll('#fl300Form input, #fl300Form select, #fl300Form textarea');
        const progressBar = document.getElementById('progressBar');
        formElements.forEach(element => {
            element.addEventListener('input', updateProgress);
        });

        function updateProgress() {
            const filledElements = Array.from(formElements).filter(el => {
                if (el.type === 'checkbox') {
                    return el.checked;
                }
                return el.value.trim() !== '';
            });
            const progress = Math.round((filledElements.length / formElements.length) * 100);
            progressBar.style.width = progress + '%';
            progressBar.textContent = progress + '%';
        }

        // Initialize tooltips
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        });

        // Update required fields based on selected case type
        const caseTypeSelect = document.getElementById('case_type');

        function updateFieldVisibility() {
            const caseType = caseTypeSelect.value;

            // Hide all fields initially
            const allOrderFields = document.querySelectorAll('.orderField');
            allOrderFields.forEach(field => {
                field.parentElement.style.display = 'none';
                field.required = false;
            });

            // Show fields based on selected case type
            if (caseType === 'custody') {
                const custodyFields = document.querySelectorAll('.custodyField');
                custodyFields.forEach(field => {
                    field.parentElement.style.display = 'block';
                    field.required = true;
                });
            } else if (caseType === 'child_support') {
                const childSupportFields = document.querySelectorAll('.child_supportField');
                childSupportFields.forEach(field => {
                    field.parentElement.style.display = 'block';
                    field.required = true;
                });
            } else if (caseType === 'spousal_support') {
                const spousalSupportFields = document.querySelectorAll('.spousal_partner_supportField');
                spousalSupportFields.forEach(field => {
                    field.parentElement.style.display = 'block';
                    field.required = true;
                });
            } else if (caseType === 'property_control') {
                const propertyControlFields = document.querySelectorAll('.property_controlField');
                propertyControlFields.forEach(field => {
                    field.parentElement.style.display = 'block';
                    field.required = true;
                });
            } else if (caseType === 'attorneys_fees_and_costs') {
                const attorneysFeesFields = document.querySelectorAll('.attorneys_fees_and_costsField');
                attorneysFeesFields.forEach(field => {
                    field.parentElement.style.display = 'block';
                    field.required = true;
                });
            }
        }

        caseTypeSelect.addEventListener('change', updateFieldVisibility);

        // Add new child fields
        const addChildButton = document.getElementById('addChildButton');
        addChildButton.addEventListener('click', function () {
            const childrenInfoSection = document.getElementById('childrenInfoSection');
            const childIndex = childrenInfoSection.querySelectorAll('.form-group').length / 2 + 1;

            const newChildNameDiv = document.createElement('div');
            newChildNameDiv.classList.add('form-group');
            newChildNameDiv.innerHTML = `<label for="child_name_${childIndex}">Child Name</label>
                                         <input type="text" class="form-control" id="child_name_${childIndex}" name="child_name[]" required>`;
            childrenInfoSection.appendChild(newChildNameDiv);

            const newChildDOBDiv = document.createElement('div');
            newChildDOBDiv.classList.add('form-group');
            newChildDOBDiv.innerHTML = `<label for="child_date_of_birth_${childIndex}">Child Date of Birth</label>
                                         <input type="date" class="form-control" id="child_date_of_birth_${childIndex}" name="child_date_of_birth[]" required>`;
            childrenInfoSection.appendChild(newChildDOBDiv);
        });

        // Show required sections to complete after submission
        const fl300Form = document.getElementById('fl300Form');
        fl300Form.addEventListener('submit', function (e) {
            let missingFields = [];
            formElements.forEach(field => {
                if (field.required) {
                    if (field.type === 'checkbox' && !field.checked) {
                        missingFields.push(field.name);
                    } else if (field.value.trim() === '') {
                        missingFields.push(field.name);
                    }
                }
            });

            if (missingFields.length > 0) {
                e.preventDefault();
                alert("You still need to complete the following fields: " + missingFields.join(", "));
            }
        });
    </script>
</body>
</html>

